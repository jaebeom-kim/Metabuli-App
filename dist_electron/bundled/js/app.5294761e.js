(function(){"use strict";var e={6965:function(e,t,a){var n=a(5130),r=a(6768),o=a(6450),u=a(249),l=a(8332),s=a(6990),i=a(554),c=a(1720),d=a(9669),f=a(6938),b=a(4718),m=a(8477),p=a(3931);function v(e,t,a,n,v,h){const g=(0,r.g2)("router-link"),_=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(o.E,null,{default:(0,r.k6)((()=>[(0,r.bF)(u.z,null,{default:(0,r.k6)((()=>[(0,r.bF)(l.Z),(0,r.bF)(s.l,null,{default:(0,r.k6)((()=>[(0,r.eW)("Metabuli")])),_:1}),(0,r.bF)(c.h),(0,r.bF)(i.D,null,{default:(0,r.k6)((()=>[(0,r.eW)("GitHub")])),_:1}),(0,r.bF)(i.D,{icon:""},{default:(0,r.k6)((()=>[(0,r.bF)(d.w,null,{default:(0,r.k6)((()=>[(0,r.eW)("mdi-dots-vertical")])),_:1})])),_:1})])),_:1}),(0,r.bF)(p.e,null,{default:(0,r.k6)((()=>[(0,r.bF)(f.x8,null,{default:(0,r.k6)((()=>[(0,r.bF)(b.g,null,{default:(0,r.k6)((()=>[(0,r.bF)(g,{to:"/search",class:"v-list-item--link"},{default:(0,r.k6)((()=>[(0,r.eW)("Search")])),_:1})])),_:1}),(0,r.bF)(b.g,null,{default:(0,r.k6)((()=>[(0,r.bF)(g,{to:"/results",class:"v-list-item--link"},{default:(0,r.k6)((()=>[(0,r.eW)("Results")])),_:1})])),_:1})])),_:1})])),_:1}),(0,r.bF)(m.Y,null,{default:(0,r.k6)((()=>[(0,r.bF)(_)])),_:1})])),_:1})}var h={name:"App",components:{},data:()=>({})},g=a(1241);const _=(0,g.A)(h,[["render",v]]);var k=_,y=a(1387);function F(e,t,a,n,o,u){const l=(0,r.g2)("SearchSetting");return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(l)])}var E=a(4232),w=a(197),O=a(7196),S=a(3813),j=a(5126),D=a(2048),N=a(4366),I=a(8050);const x={class:"status-container"};function P(e,t,a,n,o,u){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.bF)(S.I,null,{default:(0,r.k6)((()=>[(0,r.bF)(w.J,null,{default:(0,r.k6)((()=>[(0,r.bF)(N.u,{title:"Search Settings"}),(0,r.bF)(O.f,{clearable:"",density:"compact",label:"q1",variant:"underlined"}),(0,r.bF)(O.f,{clearable:"",density:"compact",label:"q2",variant:"underlined"}),(0,r.bF)(O.f,{clearable:"",density:"compact",label:"db",variant:"underlined"}),(0,r.bF)(O.f,{clearable:"",density:"compact",label:"outdir",variant:"underlined"}),(0,r.bF)(D.W,{label:"Job ID",variant:"underlined"}),(0,r.bF)(D.W,{label:"Max RAM",variant:"underlined"}),(0,r.bF)(i.D,{onClick:u.sendRequest},{default:(0,r.k6)((()=>[(0,r.eW)("Run Metabuli")])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,r.bF)(S.I,null,{default:(0,r.k6)((()=>[(0,r.bF)(w.J,null,{default:(0,r.k6)((()=>[(0,r.bF)(N.u,null,{default:(0,r.k6)((()=>[(0,r.bF)(I.s,null,{default:(0,r.k6)((()=>[(0,r.eW)("Status: "+(0,E.v_)(e.status),1)])),_:1})])),_:1}),(0,r.Lk)("div",x,[(0,r.bF)(j.y,{src:u.statusImage,alt:"Status Image",height:"200"},null,8,["src"]),(0,r.Lk)("div",null,(0,E.v_)(u.statusMessage),1),(0,r.bF)(c.h)])])),_:1})])),_:1})])}var C=a(4373);const L=C.A.create({baseURL:"http://localhost:8081",headers:{"Content-Type":"multipart/form-data"}});var T=L,R={name:"SearchSetting",data:()=>({results:"",formData:new FormData,jobDetails:{q1:"/Users/sunnylee/Documents/Steinegger Lab/metabuli_example/SRR14484345_1.fq",q2:"/Users/sunnylee/Documents/Steinegger Lab/metabuli_example/SRR14484345_2.fq",database:"/Users/sunnylee/Documents/Steinegger Lab/metabuli_example/refseq_virus",jobid:"TEST99",outdir:"/Users/sunnylee/Documents/Steinegger Lab/metabuli_example",maxram:128},status:"INITIAL"}),computed:{statusMessage(){switch(this.status){case"INITIAL":return"Input search settings and run.";case"PENDING":return"JOB PENDING";case"RUNNING":return"JOB IS RUNNING";case"COMPLETE":return"Job is complete. Check results in comparison results table.";default:return"An error occurred, please try again."}},statusImage(){switch(this.status){case"INITIAL":return"/assets/marv_metabuli_small.png";case"RUNNING":return"/assets/marv_metabuli_small.png";case"COMPLETE":return"/assets/simple_marv_love.png";default:return"/assets/simple_marv_sad.png"}}},methods:{populateFormData(){this.formData.append("q1",this.jobDetails.q1),this.formData.append("q2",this.jobDetails.q2),this.formData.append("database[]",this.jobDetails.database),this.formData.append("jobid",this.jobDetails.jobid),this.formData.append("outdir",this.jobDetails.outdir),this.formData.append("maxram",this.jobDetails.maxram)},async sendRequest(){this.populateFormData(),T.post("/api/ticket",this.formData).then((async e=>{console.log("success",e.data);try{await this.pollJobStatus(e.data.id),console.log("COMPLETE")}catch(t){console.error("Error waiting for job completion:",t)}})).catch((e=>{console.error("error",e)}))},async pollJobStatus(e,t=500,a=3e5){const n=Date.now();while(Date.now()-n<a){try{const t=await T.get(`/api/ticket/${e}`);if(console.log(t.data.status),"RUNNING"===t.data.status)this.status="RUNNING";else if("COMPLETE"===t.data.status)return this.status="COMPLETE",!0}catch(r){console.error("Error polling job status:",r)}await new Promise((e=>setTimeout(e,t)))}throw new Error("Polling timed out")},saveResults(){sessionStorage.setItem("results",JSON.stringify(this.results))}}};const q=(0,g.A)(R,[["render",P],["__scopeId","data-v-8cfcaae8"]]);var A=q,M={name:"SearchPage",components:{SearchSetting:A}};const U=(0,g.A)(M,[["render",F]]);var W=U,J=a(697),G=a(381),X=a(6686),V=a(7604),B=a(3822);function K(e,t,a,n,o,u){return(0,r.uX)(),(0,r.Wv)(w.J,null,{default:(0,r.k6)((()=>[(0,r.bF)(N.u,null,{default:(0,r.k6)((()=>[(0,r.bF)(G.h,{modelValue:o.tab,"onUpdate:modelValue":t[0]||(t[0]=e=>o.tab=e),"align-tabs":"title"},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.items,(e=>((0,r.uX)(),(0,r.Wv)(X.U,{key:e,text:e,value:e},null,8,["text","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),(0,r.bF)(V.l,{modelValue:o.tab,"onUpdate:modelValue":t[1]||(t[1]=e=>o.tab=e)},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(o.items,(e=>((0,r.uX)(),(0,r.Wv)(B.Y,{key:e,value:e},{default:(0,r.k6)((()=>[(0,r.bF)(w.J,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(J.O,{textContent:(0,E.v_)(o.text)},null,8,["textContent"])])),_:1})])),_:2},1032,["value"])))),128))])),_:1},8,["modelValue"])])),_:1})}var Y={name:"ResultsPage",data(){return{tab:null,items:["TABLE","SANKEY"],text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."}}};const H=(0,g.A)(Y,[["render",K]]);var $=H;const z=[{path:"/",name:"Home",redirect:"/search"},{path:"/search",name:"SearchPage",component:W},{path:"/results",name:"ResultsPage",component:$}],Z=(0,y.aE)({history:(0,y.LA)("app://./"),routes:z});var Q=Z,ee=(a(5524),a(5790)),te=(0,ee.$N)();async function ae(){const e=await a.e(53).then(a.t.bind(a,8874,23));e.load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}ae();const ne=(0,n.Ef)(k);ne.use(Q),ne.use(te),ne.mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,o){if(!n){var u=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],o=e[c][2];for(var l=!0,s=0;s<n.length;s++)(!1&o||u>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,o<u&&(u=o));if(l){e.splice(c--,1);var i=r();void 0!==i&&(t=i)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,r,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var o=Object.create(null);a.r(o);var u={};e=e||[null,t({}),t([]),t(t)];for(var l=2&r&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((function(e){u[e]=function(){return n[e]}}));return u["default"]=function(){return n},a.d(o,u),o}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/webfontloader.3091fdc5.js"}}(),function(){a.miniCssF=function(e){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="metabuli-app:";a.l=function(n,r,o,u){if(e[n])e[n].push(r);else{var l,s;if(void 0!==o)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var d=i[c];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+o){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.setAttribute("data-webpack",t+o),l.src=n),e[n]=[r];var f=function(t,a){l.onerror=l.onload=null,clearTimeout(b);var r=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),r&&r.forEach((function(e){return e(a)})),t)return t(a)},b=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="app://./"}(),function(){var e={524:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(a,n){r=e[t]=[a,n]}));n.push(r[2]=o);var u=a.p+a.u(t),l=new Error,s=function(n){if(a.o(e,t)&&(r=e[t],0!==r&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),u=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+u+")",l.name="ChunkLoadError",l.type=o,l.request=u,r[1](l)}};a.l(u,s,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,u=n[0],l=n[1],s=n[2],i=0;if(u.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var c=s(a)}for(t&&t(n);i<u.length;i++)o=u[i],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},n=self["webpackChunkmetabuli_app"]=self["webpackChunkmetabuli_app"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(6965)}));n=a.O(n)})();
//# sourceMappingURL=app.5294761e.js.map